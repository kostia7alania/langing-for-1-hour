<template>
  <header
    class="
      app-header
      tw-flex tw-items-center tw-justify-between
      dark:tw-bg-black
      tw-text-gray-300
      md:dark:tw-bg-dark md:dark:tw-text-gray-300
    "
  >
    <!-- left -->
    <div
      class="tw-ml-3 sm:tw-ml-4 md:tw-ml-6 lg:tw-ml-14 xlg:tw-ml-16 tw-order-1"
    >
      <div class="logo-wrapper">
        <a href="#section-1" @click.prevent="scrollToId('#section-1')">
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              x="0.5"
              y="0.5"
              width="29"
              height="29"
              rx="0.5"
              fill="#D8D8D8"
              stroke="#979797"
            />
            <path
              d="M6.1852 10.7H7.0402L6.0682 16.235H8.9572L8.8222 17H5.0782L6.1852 10.7ZM12.5838 11.33C12.1998 11.33 11.8548 11.414 11.5488 11.582C11.2488 11.744 10.9938 11.963 10.7838 12.239C10.5738 12.515 10.4118 12.833 10.2978 13.193C10.1898 13.547 10.1358 13.913 10.1358 14.291C10.1358 14.579 10.1748 14.849 10.2528 15.101C10.3308 15.353 10.4448 15.575 10.5948 15.767C10.7508 15.953 10.9428 16.1 11.1708 16.208C11.3988 16.316 11.6628 16.37 11.9628 16.37C12.3468 16.37 12.6888 16.289 12.9888 16.127C13.2948 15.959 13.5528 15.737 13.7628 15.461C13.9728 15.185 14.1318 14.87 14.2398 14.516C14.3538 14.156 14.4108 13.787 14.4108 13.409C14.4108 13.121 14.3718 12.851 14.2938 12.599C14.2158 12.347 14.0988 12.128 13.9428 11.942C13.7928 11.75 13.6038 11.6 13.3758 11.492C13.1478 11.384 12.8838 11.33 12.5838 11.33ZM11.8908 17.108C11.4648 17.108 11.0898 17.036 10.7658 16.892C10.4418 16.748 10.1658 16.553 9.93784 16.307C9.71584 16.061 9.54784 15.77 9.43384 15.434C9.31984 15.098 9.26284 14.735 9.26284 14.345C9.26284 13.865 9.33784 13.4 9.48784 12.95C9.64384 12.5 9.86584 12.101 10.1538 11.753C10.4418 11.399 10.7958 11.117 11.2158 10.907C11.6358 10.697 12.1158 10.592 12.6558 10.592C13.0758 10.592 13.4478 10.664 13.7718 10.808C14.1018 10.952 14.3778 11.147 14.5998 11.393C14.8278 11.639 14.9988 11.933 15.1128 12.275C15.2268 12.611 15.2838 12.971 15.2838 13.355C15.2838 13.835 15.2058 14.3 15.0498 14.75C14.8998 15.2 14.6808 15.602 14.3928 15.956C14.1048 16.304 13.7508 16.583 13.3308 16.793C12.9108 17.003 12.4308 17.108 11.8908 17.108ZM19.1744 11.339C18.8324 11.339 18.5144 11.417 18.2204 11.573C17.9324 11.723 17.6804 11.936 17.4644 12.212C17.2544 12.482 17.0894 12.809 16.9694 13.193C16.8494 13.577 16.7894 13.997 16.7894 14.453C16.7894 14.735 16.8224 14.993 16.8884 15.227C16.9604 15.461 17.0594 15.662 17.1854 15.83C17.3174 15.998 17.4764 16.13 17.6624 16.226C17.8544 16.316 18.0704 16.361 18.3104 16.361C18.5144 16.361 18.7094 16.322 18.8954 16.244C19.0814 16.16 19.2494 16.049 19.3994 15.911C19.5494 15.767 19.6754 15.599 19.7774 15.407C19.8794 15.215 19.9514 15.005 19.9934 14.777L20.0744 14.336H18.7604L18.8774 13.661H20.9924L20.6414 15.686C20.6354 15.716 20.6294 15.752 20.6234 15.794C20.6234 15.83 20.6234 15.869 20.6234 15.911C20.6234 16.073 20.6684 16.19 20.7584 16.262C20.8544 16.334 20.9864 16.37 21.1544 16.37L20.8574 17.045C20.1974 17.045 19.8674 16.724 19.8674 16.082C19.6814 16.37 19.4414 16.613 19.1474 16.811C18.8534 17.009 18.4964 17.108 18.0764 17.108C17.7644 17.108 17.4764 17.051 17.2124 16.937C16.9484 16.823 16.7174 16.658 16.5194 16.442C16.3274 16.22 16.1774 15.953 16.0694 15.641C15.9614 15.323 15.9074 14.966 15.9074 14.57C15.9074 14 15.9884 13.472 16.1504 12.986C16.3124 12.5 16.5374 12.08 16.8254 11.726C17.1194 11.372 17.4704 11.096 17.8784 10.898C18.2864 10.694 18.7334 10.592 19.2194 10.592C19.6034 10.592 19.9394 10.646 20.2274 10.754C20.5214 10.856 20.7944 10.988 21.0464 11.15L20.5964 11.834C20.3804 11.684 20.1614 11.564 19.9394 11.474C19.7234 11.384 19.4684 11.339 19.1744 11.339ZM25.0995 11.33C24.7155 11.33 24.3705 11.414 24.0645 11.582C23.7645 11.744 23.5095 11.963 23.2995 12.239C23.0895 12.515 22.9275 12.833 22.8135 13.193C22.7055 13.547 22.6515 13.913 22.6515 14.291C22.6515 14.579 22.6905 14.849 22.7685 15.101C22.8465 15.353 22.9605 15.575 23.1105 15.767C23.2665 15.953 23.4585 16.1 23.6865 16.208C23.9145 16.316 24.1785 16.37 24.4785 16.37C24.8625 16.37 25.2045 16.289 25.5045 16.127C25.8105 15.959 26.0685 15.737 26.2785 15.461C26.4885 15.185 26.6475 14.87 26.7555 14.516C26.8695 14.156 26.9265 13.787 26.9265 13.409C26.9265 13.121 26.8875 12.851 26.8095 12.599C26.7315 12.347 26.6145 12.128 26.4585 11.942C26.3085 11.75 26.1195 11.6 25.8915 11.492C25.6635 11.384 25.3995 11.33 25.0995 11.33ZM24.4065 17.108C23.9805 17.108 23.6055 17.036 23.2815 16.892C22.9575 16.748 22.6815 16.553 22.4535 16.307C22.2315 16.061 22.0635 15.77 21.9495 15.434C21.8355 15.098 21.7785 14.735 21.7785 14.345C21.7785 13.865 21.8535 13.4 22.0035 12.95C22.1595 12.5 22.3815 12.101 22.6695 11.753C22.9575 11.399 23.3115 11.117 23.7315 10.907C24.1515 10.697 24.6315 10.592 25.1715 10.592C25.5915 10.592 25.9635 10.664 26.2875 10.808C26.6175 10.952 26.8935 11.147 27.1155 11.393C27.3435 11.639 27.5145 11.933 27.6285 12.275C27.7425 12.611 27.7995 12.971 27.7995 13.355C27.7995 13.835 27.7215 14.3 27.5655 14.75C27.4155 15.2 27.1965 15.602 26.9085 15.956C26.6205 16.304 26.2665 16.583 25.8465 16.793C25.4265 17.003 24.9465 17.108 24.4065 17.108Z"
              fill="white"
            />
          </svg>
        </a>
      </div>
    </div>
    <!-- center -->
    <div class="tw-order-3 md:tw-order-2">
      <MainHeaderMenu />
    </div>
    <!-- right -->
    <div
      class="
        tw-mr-6
        md:tw-mr-10
        lg:tw-mr-14
        tw-ml-auto
        md:tw-ml-0
        tw-order-2
        md:tw-order-3
        tw-gap-5
        lg:tw-gap-8
        tw-flex tw-items-center
      "
    >
      <!-- <DarkToggle class="anim-batch-once" /> -->
      <LanguageToggle class="tw-hidden md:tw-block" />
    </div>
  </header>
</template>

<script lang="ts">
import { defineComponent } from '@nuxtjs/composition-api'
// import HeaderJoinUs from './HeaderJoinUs.vue'
import MainHeaderMenu from './MainHeaderMenu.vue'
// import DarkToggle from './DarkToggle.vue'
import LanguageToggle from './LanguageToggle.vue'

import { linksMap } from '@/layouts/constants/linksMap'
import { useScrollEventTop } from '@/compositions/scrollEvent'

import { scrollToId } from '@/compositions/scrollTo'

export default defineComponent({
  name: 'MainHeader',
  components: {
    // HeaderJoinUs,
    MainHeaderMenu,
    // DarkToggle,
    LanguageToggle,
  },
  setup(/* _, ctx: SetupContext */) {
    const { activeLink } = useScrollEventTop()

    return { linksMap, scrollToId, activeLink }
  },
})
</script>

<style lang="scss" scoped>
.app-header {
  z-index: 1111;
  @media (max-width: 770px) {
    .logo {
      width: 32px;
    }
  }
}

::v-deep {
  .tw-modal-container {
    @media (max-width: 500px) {
      // on small screens - full width
      width: calc(100vw - 20px) !important;
    }
  }
}

.logo {
  transform: rotate(0deg);
  transition: transform 0.8s ease-in-out;
  cursor: pointer;
  &:hover {
    transform: rotate(360deg);
  }
  &:active {
    transform: rotate(-360deg);
  }
}
</style>
